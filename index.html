<head>
    <meta charset="utf-8" />
    <script src="https://js.braintreegateway.com/web/dropin/1.31.2/js/dropin.min.js"></script>
</head>
<body>
    <span>Client secret:</span>
    <input id="client-secret" />
    <button id="dropin">dropin</button><br /><br />

    <div id="dropin-container"></div>
    <br />

    <form id="payment-form" action="/route/on/your/server" method="post">
        <div id="dropin-container"></div>
        <input type="submit" />
        <br />
        <br />
        <span>Nonce:</span>
        <input id="nonce" name="payment_method_nonce" />
    </form>

    <script type="text/javascript">
        const clientSecretInput = document.getElementById('client-secret');
        const dropinButton = document.getElementById('dropin');
        const form = document.getElementById('payment-form');
        const nonceInput = document.getElementById('nonce');

        const baseUrl = 'http://localhost:80';

        dropinButton.addEventListener('click', async () => {
            const dropinInstance = await braintree.dropin.create({
                container: '#dropin-container',
                authorization: clientSecretInput.value,
            });

            form.addEventListener('submit', async (event) => {
                event.preventDefault();
                const payload = await dropinInstance.requestPaymentMethod();
                document.getElementById('nonce').value = payload.nonce;
            });
        });
    </script>
</body>
